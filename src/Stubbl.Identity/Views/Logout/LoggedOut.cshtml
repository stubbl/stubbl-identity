@using Stubbl.Identity.Models.Logout

@model LoggedOutViewModel

@{
    ViewData["IsLoggedOut"] = true;
}

<div class="row">
    <div class="col-md-6 offset-md-3">
        <div class="page-header">
            <h1 class="mb-5 display-4">
                You are now logged out
            </h1>
        </div>

        @if (Model.PostLogoutRedirectUri != null)
        {
            <div>
                Click <a class="PostLogoutRedirectUri" href="@Model.PostLogoutRedirectUri">here</a> to return to <span>@Model.ClientName</span>.
            </div>
        }

        @if (Model.SignOutIframeUrl != null)
        {
            <iframe width="0" height="0" class="signout" src="@Model.SignOutIframeUrl"></iframe>
        }
    </div>
</div>

@section Scripts
{
    @if (Model.AutomaticRedirectAfterSignOut)
    {
        <script>
            window.addEventListener("load", function () {
                var a = document.querySelector("a.PostLogoutRedirectUri");

                if (a) {
                    window.location = a.href;
                }
            });
        </script>
    }
}
